# ƒê·ªÄ XU·∫§T TH√äM T√ÅC NH√ÇN CHO D·ª∞ √ÅN SHOPOMG

## V·∫•n ƒë·ªÅ hi·ªán t·∫°i

Hi·ªán t·∫°i h·ªá th·ªëng ch·ªâ c√≥ **2 t√°c nh√¢n:**
- **Admin** (Qu·∫£n tr·ªã vi√™n)
- **Kh√°ch h√†ng** (Customer/User)

‚Üí **Qu√° √≠t** cho m·ªôt h·ªá th·ªëng th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠ ho√†n ch·ªânh

---

## ƒê·ªÄ XU·∫§T TH√äM 3 T√ÅC NH√ÇN M·ªöI

### **Ph∆∞∆°ng √°n 1: Th√™m 3 t√°c nh√¢n (Khuy·∫øn ngh·ªã)**

#### **1. Nh√¢n vi√™n B√°n h√†ng (Sales Staff)**

**Vai tr√≤:** Nh√¢n vi√™n h·ªó tr·ª£ kh√°ch h√†ng v√† x·ª≠ l√Ω ƒë∆°n h√†ng

**Ch·ª©c nƒÉng:**
- ‚úÖ Xem danh s√°ch ƒë∆°n h√†ng
- ‚úÖ Xem chi ti·∫øt ƒë∆°n h√†ng
- ‚úÖ C·∫≠p nh·∫≠t tr·∫°ng th√°i ƒë∆°n h√†ng (PENDING ‚Üí CONFIRMED ‚Üí SHIPPING)
- ‚úÖ H·ªßy ƒë∆°n h√†ng (v·ªõi l√Ω do)
- ‚úÖ G·ª≠i email th√¥ng b√°o cho kh√°ch h√†ng
- ‚úÖ Xem th√¥ng tin kh√°ch h√†ng (ch·ªâ ƒë·ªçc)
- ‚úÖ T√¨m ki·∫øm ƒë∆°n h√†ng theo m√£, t√™n kh√°ch h√†ng, SƒêT
- ‚ùå **KH√îNG** ƒë∆∞·ª£c: X√≥a ƒë∆°n h√†ng, qu·∫£n l√Ω s·∫£n ph·∫©m, qu·∫£n l√Ω danh m·ª•c, xem b√°o c√°o doanh thu

**Use Cases li√™n quan:**
- UC-10: Qu·∫£n l√Ω ƒê∆°n h√†ng (phi√™n b·∫£n gi·ªõi h·∫°n)
- UC-14 (m·ªõi): H·ªó tr·ª£ kh√°ch h√†ng

**L√Ω do c·∫ßn c√≥:**
- Ph√¢n t√°ch quy·ªÅn h·∫°n r√µ r√†ng
- Admin kh√¥ng c·∫ßn x·ª≠ l√Ω t·∫•t c·∫£ ƒë∆°n h√†ng
- Ph√π h·ª£p v·ªõi quy tr√¨nh th·ª±c t·∫ø c·ªßa shop

---

#### **2. Nh√¢n vi√™n Kho (Warehouse Staff)**

**Vai tr√≤:** Qu·∫£n l√Ω t·ªìn kho v√† c·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng s·∫£n ph·∫©m

**Ch·ª©c nƒÉng:**
- ‚úÖ Xem danh s√°ch s·∫£n ph·∫©m
- ‚úÖ Xem s·ªë l∆∞·ª£ng t·ªìn kho (ProductVariants)
- ‚úÖ C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng t·ªìn kho
- ‚úÖ Xem l·ªãch s·ª≠ nh·∫≠p/xu·∫•t kho
- ‚úÖ T√¨m ki·∫øm s·∫£n ph·∫©m theo SKU, t√™n
- ‚ùå **KH√îNG** ƒë∆∞·ª£c: Th√™m/x√≥a s·∫£n ph·∫©m, thay ƒë·ªïi gi√°, qu·∫£n l√Ω danh m·ª•c

**Use Cases li√™n quan:**
- UC-15 (m·ªõi): Qu·∫£n l√Ω t·ªìn kho
- UC-11: Qu·∫£n l√Ω S·∫£n ph·∫©m (ch·ªâ xem v√† c·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng)

**L√Ω do c·∫ßn c√≥:**
- Qu·∫£n l√Ω kho l√† ch·ª©c nƒÉng quan tr·ªçng trong e-commerce
- T√°ch bi·ªát quy·ªÅn qu·∫£n l√Ω s·∫£n ph·∫©m v√† qu·∫£n l√Ω kho
- Tr√°nh nh·∫ßm l·∫´n khi c·∫≠p nh·∫≠t t·ªìn kho

---

#### **3. Kh√°ch v√£ng lai (Guest)**

**Vai tr√≤:** Ng∆∞·ªùi d√πng ch∆∞a ƒëƒÉng k√Ω/ƒëƒÉng nh·∫≠p

**Ch·ª©c nƒÉng:**
- ‚úÖ Xem danh s√°ch s·∫£n ph·∫©m
- ‚úÖ Xem chi ti·∫øt s·∫£n ph·∫©m
- ‚úÖ T√¨m ki·∫øm, l·ªçc, s·∫Øp x·∫øp s·∫£n ph·∫©m
- ‚úÖ Xem ƒë√°nh gi√° s·∫£n ph·∫©m
- ‚ùå **KH√îNG** ƒë∆∞·ª£c: Th√™m v√†o gi·ªè h√†ng, ƒë·∫∑t h√†ng, vi·∫øt ƒë√°nh gi√°

**Use Cases li√™n quan:**
- UC-08: S·∫£n ph·∫©m (ch·ªâ xem)
- UC-16 (m·ªõi): Duy·ªát s·∫£n ph·∫©m (Guest)

**L√Ω do c·∫ßn c√≥:**
- Ph√¢n bi·ªát r√µ kh√°ch v√£ng lai v√† kh√°ch h√†ng ƒë√£ ƒëƒÉng k√Ω
- Khuy·∫øn kh√≠ch ƒëƒÉng k√Ω ƒë·ªÉ mua h√†ng
- Ph√π h·ª£p v·ªõi th·ª±c t·∫ø (nhi·ªÅu ng∆∞·ªùi ch·ªâ xem kh√¥ng mua)

---

### **Ph∆∞∆°ng √°n 2: Th√™m 2 t√°c nh√¢n (T·ªëi thi·ªÉu)**

N·∫øu mu·ªën ƒë∆°n gi·∫£n h∆°n, ch·ªâ th√™m:
1. **Nh√¢n vi√™n B√°n h√†ng** (Sales Staff)
2. **Kh√°ch v√£ng lai** (Guest)

‚Üí T·ªïng c·ªông **4 t√°c nh√¢n**

---

## SO S√ÅNH C√ÅC PH∆Ø∆†NG √ÅN

| **Ti√™u ch√≠** | **Hi·ªán t·∫°i (2 t√°c nh√¢n)** | **Ph∆∞∆°ng √°n 1 (5 t√°c nh√¢n)** | **Ph∆∞∆°ng √°n 2 (4 t√°c nh√¢n)** |
|--------------|---------------------------|------------------------------|------------------------------|
| **S·ªë l∆∞·ª£ng t√°c nh√¢n** | 2 | 5 | 4 |
| **Ph√¢n quy·ªÅn r√µ r√†ng** | ‚ùå Ch∆∞a r√µ | ‚úÖ R·∫•t r√µ | ‚úÖ R√µ |
| **Ph√π h·ª£p th·ª±c t·∫ø** | ‚ùå Ch∆∞a | ‚úÖ R·∫•t ph√π h·ª£p | ‚úÖ Ph√π h·ª£p |
| **ƒê·ªô ph·ª©c t·∫°p** | Th·∫•p | V·ª´a ph·∫£i | Th·∫•p |
| **S·ªë Use Cases** | 13 | 16-17 | 14-15 |
| **Khuy·∫øn ngh·ªã** | ‚ùå | ‚úÖ **Khuy·∫øn ngh·ªã** | ‚ö†Ô∏è T·ªëi thi·ªÉu |

---

## DANH S√ÅCH T√ÅC NH√ÇN M·ªöI (5 T√ÅC NH√ÇN)

| **STT** | **T√™n t√°c nh√¢n** | **Vai tr√≤** | **Quy·ªÅn h·∫°n** |
|---------|------------------|-------------|---------------|
| 1 | **Admin** | Qu·∫£n tr·ªã vi√™n | To√†n quy·ªÅn h·ªá th·ªëng |
| 2 | **Nh√¢n vi√™n B√°n h√†ng** | Sales Staff | Qu·∫£n l√Ω ƒë∆°n h√†ng, h·ªó tr·ª£ kh√°ch h√†ng |
| 3 | **Nh√¢n vi√™n Kho** | Warehouse Staff | Qu·∫£n l√Ω t·ªìn kho |
| 4 | **Kh√°ch h√†ng** | Customer | Mua s·∫Øm, ƒë√°nh gi√°, qu·∫£n l√Ω t√†i kho·∫£n |
| 5 | **Kh√°ch v√£ng lai** | Guest | Xem s·∫£n ph·∫©m (ch·ªâ ƒë·ªçc) |

---

## USE CASES M·ªöI C·∫¶N TH√äM

### **UC-14: H·ªó tr·ª£ Kh√°ch h√†ng**
- **T√°c nh√¢n:** Nh√¢n vi√™n B√°n h√†ng
- **M√¥ t·∫£:** Xem th√¥ng tin kh√°ch h√†ng, l·ªãch s·ª≠ ƒë∆°n h√†ng, h·ªó tr·ª£ gi·∫£i ƒë√°p

### **UC-15: Qu·∫£n l√Ω T·ªìn kho**
- **T√°c nh√¢n:** Nh√¢n vi√™n Kho
- **M√¥ t·∫£:** C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng t·ªìn kho, xem l·ªãch s·ª≠ nh·∫≠p/xu·∫•t

### **UC-16: Duy·ªát S·∫£n ph·∫©m (Guest)**
- **T√°c nh√¢n:** Kh√°ch v√£ng lai
- **M√¥ t·∫£:** Xem, t√¨m ki·∫øm, l·ªçc s·∫£n ph·∫©m (ch·ªâ ƒë·ªçc)

---

## MA TR·∫¨N USE CASE - T√ÅC NH√ÇN M·ªöI

| **Use Case** | **Admin** | **Sales** | **Warehouse** | **Customer** | **Guest** |
|--------------|:---------:|:---------:|:-------------:|:------------:|:---------:|
| UC-01: ƒêƒÉng nh·∫≠p | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | - |
| UC-02: ƒêƒÉng k√Ω | - | - | - | ‚úÖ | - |
| UC-03: Qu√™n/ƒê·∫∑t l·∫°i m·∫≠t kh·∫©u | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | - |
| UC-04: X√°c th·ª±c Email | - | - | - | ‚úÖ | - |
| UC-05: T√†i kho·∫£n c√° nh√¢n | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | - |
| UC-06: ƒê∆°n h√†ng c·ªßa t√¥i | - | - | - | ‚úÖ | - |
| UC-07: Gi·ªè h√†ng | - | - | - | ‚úÖ | - |
| UC-08: S·∫£n ph·∫©m | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| UC-09: Qu·∫£n l√Ω T√†i kho·∫£n | ‚úÖ | - | - | - | - |
| UC-10: Qu·∫£n l√Ω ƒê∆°n h√†ng | ‚úÖ | ‚úÖ (gi·ªõi h·∫°n) | - | - | - |
| UC-11: Qu·∫£n l√Ω S·∫£n ph·∫©m | ‚úÖ | - | ‚úÖ (ch·ªâ s·ªë l∆∞·ª£ng) | - | - |
| UC-12: Qu·∫£n l√Ω Danh m·ª•c | ‚úÖ | - | - | - | - |
| UC-13: Dashboard | ‚úÖ | - | - | - | - |
| **UC-14: H·ªó tr·ª£ Kh√°ch h√†ng** | ‚úÖ | ‚úÖ | - | - | - |
| **UC-15: Qu·∫£n l√Ω T·ªìn kho** | ‚úÖ | - | ‚úÖ | - | - |
| **UC-16: Duy·ªát S·∫£n ph·∫©m** | - | - | - | - | ‚úÖ |

---

## TRI·ªÇN KHAI TRONG CODE

### **B∆∞·ªõc 1: C·∫≠p nh·∫≠t b·∫£ng Roles**

```sql
-- Th√™m roles m·ªõi
INSERT INTO Roles (name) VALUES 
('ADMIN'),
('SALES_STAFF'),
('WAREHOUSE_STAFF'),
('USER'),
('GUEST');
```

### **B∆∞·ªõc 2: T·∫°o Security Config**

```java
@Configuration
public class SecurityConfig {
    
    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) {
        http.authorizeHttpRequests(auth -> auth
            // Public
            .requestMatchers("/", "/products/**", "/login", "/register").permitAll()
            
            // Customer
            .requestMatchers("/cart/**", "/checkout/**", "/account/**")
                .hasRole("USER")
            
            // Sales Staff
            .requestMatchers("/sales/orders/**")
                .hasAnyRole("SALES_STAFF", "ADMIN")
            
            // Warehouse Staff
            .requestMatchers("/warehouse/inventory/**")
                .hasAnyRole("WAREHOUSE_STAFF", "ADMIN")
            
            // Admin only
            .requestMatchers("/admin/**")
                .hasRole("ADMIN")
        );
        return http.build();
    }
}
```

### **B∆∞·ªõc 3: T·∫°o Controllers m·ªõi**

```java
@Controller
@RequestMapping("/sales")
@PreAuthorize("hasAnyRole('SALES_STAFF', 'ADMIN')")
public class SalesController {
    // X·ª≠ l√Ω ƒë∆°n h√†ng cho nh√¢n vi√™n b√°n h√†ng
}

@Controller
@RequestMapping("/warehouse")
@PreAuthorize("hasAnyRole('WAREHOUSE_STAFF', 'ADMIN')")
public class WarehouseController {
    // Qu·∫£n l√Ω t·ªìn kho
}
```

---

## K·∫æT LU·∫¨N & KHUY·∫æN NGH·ªä

### **Khuy·∫øn ngh·ªã: Ch·ªçn Ph∆∞∆°ng √°n 1 (5 t√°c nh√¢n)**

**L√Ω do:**
1. ‚úÖ **Ph√¢n quy·ªÅn r√µ r√†ng:** M·ªói t√°c nh√¢n c√≥ vai tr√≤ c·ª• th·ªÉ
2. ‚úÖ **Ph√π h·ª£p th·ª±c t·∫ø:** Gi·ªëng h·ªá th·ªëng th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠ th·∫≠t
3. ‚úÖ **D·ªÖ m·ªü r·ªông:** C√≥ th·ªÉ th√™m t√°c nh√¢n kh√°c sau n√†y
4. ‚úÖ **ƒê√°p ·ª©ng y√™u c·∫ßu th·∫ßy:** ƒê·ªß t√°c nh√¢n, kh√¥ng qu√° √≠t
5. ‚úÖ **Kh√¥ng qu√° ph·ª©c t·∫°p:** Ch·ªâ 5 t√°c nh√¢n, d·ªÖ qu·∫£n l√Ω

**T√°c nh√¢n ƒë·ªÅ xu·∫•t:**
1. **Admin** - Qu·∫£n tr·ªã vi√™n (to√†n quy·ªÅn)
2. **Nh√¢n vi√™n B√°n h√†ng** - X·ª≠ l√Ω ƒë∆°n h√†ng
3. **Nh√¢n vi√™n Kho** - Qu·∫£n l√Ω t·ªìn kho
4. **Kh√°ch h√†ng** - Ng∆∞·ªùi mua h√†ng
5. **Kh√°ch v√£ng lai** - Ng∆∞·ªùi xem s·∫£n ph·∫©m

**Use Cases tƒÉng th√™m:** 13 ‚Üí 16 Use Cases

---

**B·∫°n c√≥ mu·ªën t√¥i c·∫≠p nh·∫≠t l·∫°i file ACTORS_AND_USECASES.md v·ªõi 5 t√°c nh√¢n m·ªõi kh√¥ng?** üéØ
