<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{fragments/admin-layout :: view(~{::title}, ~{::article})}">
<head>
    <title>Tổng quan - Admin</title>
</head>
<body>
    <article>
        <div class="row g-4 mb-4">
            <div class="col-md-3">
                <div class="stat-card">
                    <div>
                        <h6 class="text-muted small fw-bold text-uppercase mb-1">Doanh thu tháng</h6>
                        <h3 class="fw-bold mb-0">125.0M</h3>
                    </div>
                    <div class="icon-box bg-primary-soft"><i class="fas fa-dollar-sign"></i></div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card">
                    <div>
                        <h6 class="text-muted small fw-bold text-uppercase mb-1">Đơn hàng mới</h6>
                        <h3 class="fw-bold mb-0">24</h3>
                    </div>
                    <div class="icon-box bg-success-soft"><i class="fas fa-shopping-bag"></i></div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card">
                    <div>
                        <h6 class="text-muted small fw-bold text-uppercase mb-1">Khách hàng</h6>
                        <h3 class="fw-bold mb-0">1.2k</h3>
                    </div>
                    <div class="icon-box bg-warning-soft"><i class="fas fa-user-plus"></i></div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card">
                    <div>
                        <h6 class="text-muted small fw-bold text-uppercase mb-1">Sản phẩm</h6>
                        <h3 class="fw-bold mb-0">850</h3>
                    </div>
                    <div class="icon-box bg-danger-soft"><i class="fas fa-box"></i></div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-8 mb-4">
                <div class="card-box h-100">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h5 class="fw-bold m-0">Phân tích doanh thu</h5>
                        <select class="form-select form-select-sm w-auto border-0 bg-light">
                            <option>Tháng này</option>
                            <option>Năm nay</option>
                        </select>
                    </div>
                    <canvas id="revenueChart" height="150"></canvas>
                </div>
            </div>

            <div class="col-lg-4 mb-4">
                <div class="card-box h-100">
                    <h5 class="fw-bold mb-4">Đơn chờ xử lý</h5>
                    <div class="d-flex align-items-center mb-3 p-3 rounded bg-light">
                        <div class="icon-box bg-white shadow-sm me-3" style="width:40px; height:40px"><i class="fas fa-file-invoice text-warning"></i></div>
                        <div class="flex-grow-1">
                            <h6 class="fw-bold mb-0">#ORD-009</h6>
                            <small class="text-muted">Vừa xong</small>
                        </div>
                        <button class="btn btn-sm btn-dark rounded-pill px-3">Xem</button>
                    </div>
                    <div class="d-flex align-items-center mb-3 p-3 rounded bg-light">
                        <div class="icon-box bg-white shadow-sm me-3" style="width:40px; height:40px"><i class="fas fa-file-invoice text-warning"></i></div>
                        <div class="flex-grow-1">
                            <h6 class="fw-bold mb-0">#ORD-008</h6>
                            <small class="text-muted">5 phút trước</small>
                        </div>
                        <button class="btn btn-sm btn-dark rounded-pill px-3">Xem</button>
                    </div>
                </div>
            </div>
        </div>

        <script>
            // Fake Chart JS
            document.addEventListener("DOMContentLoaded", function() {
                const ctx = document.getElementById('revenueChart').getContext('2d');
                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['T1', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7'],
                        datasets: [{
                            label: 'Doanh thu (Triệu)',
                            data: [12, 19, 10, 15, 8, 30, 45],
                            borderColor: '#3699ff',
                            backgroundColor: 'rgba(54, 153, 255, 0.1)',
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: { plugins: { legend: { display: false } }, scales: { x: { grid: { display: false } } } }
                });
            });
        </script>
        
        <div class="chat-btn-toggle" onclick="toggleChatBox()">
			<i class="fas fa-comments"></i>
		</div>

		<div class="chat-box-container" id="chatBox">
			<div class="chat-header">
				<span><i class="fas fa-headset me-2"></i>CSKH - ShopOMG</span>
				<button type="button" class="btn-close btn-close-white"
					onclick="toggleChatBox()"></button>
			</div>

			<div class="chat-body" id="chatBody">
				<div class="message bot">Xin chào! ShopOMG có thể giúp gì cho
					bạn hôm nay?</div>
			</div>

			<div class="chat-footer">
				<input type="text" id="chatInput" class="form-control"
					placeholder="Nhập tin nhắn..." onkeypress="handleEnter(event)">
				<button class="btn btn-primary" onclick="sendMessage()">
					<i class="fas fa-paper-plane"></i>
				</button>
			</div>
		</div>


		<script
			src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.5.1/sockjs.min.js"></script>
		<script
			src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>

		<script th:src="@{/js/chat.js}"></script>
    </article>
</body>
</html>