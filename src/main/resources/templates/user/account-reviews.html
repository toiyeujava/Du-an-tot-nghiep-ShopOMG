<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" th:replace="~{fragments/layout :: view(~{::title}, ~{::article})}">

<head>
    <title>Đánh giá của tôi - ShopOMG</title>
</head>

<body>
    <article class="container py-5">
        <div class="row">
            <div class="col-lg-3 mb-4">
                <div th:replace="~{fragments/account-sidebar :: sidebar('reviews')}"></div>
            </div>
            <div class="col-lg-9">
                <div class="card-box">
                    <h5 class="fw-bold mb-1">Đánh giá của tôi</h5>
                    <p class="text-muted small mb-4">Các đánh giá sản phẩm bạn đã gửi thành công.</p>

                    <!-- Empty state -->
                    <div th:if="${#lists.isEmpty(myReviews)}" class="text-center py-5">
                        <i class="fas fa-star fa-3x text-muted mb-3 d-block"></i>
                        <h6 class="fw-semibold mb-1">Bạn chưa có đánh giá nào</h6>
                        <p class="text-muted small mb-3">Các đánh giá bạn đã gửi sẽ xuất hiện ở đây.</p>
                        <a href="/account/orders" class="btn btn-dark btn-sm px-4">Xem đơn hàng</a>
                    </div>

                    <!-- List of submitted reviews -->
                    <div th:each="review : ${myReviews}" class="d-flex align-items-start gap-3 border-bottom pb-4 mb-4">
                        <!-- Product image -->
                        <a th:href="@{/product/{id}(id=${review.product.id})}" class="flex-shrink-0">
                            <img th:src="@{${review.product.image}}" alt="Product" width="72" height="72"
                                style="object-fit:cover; border-radius:8px; border:1px solid #eee;">
                        </a>
                        <!-- Review content -->
                        <div class="flex-grow-1">
                            <a th:href="@{/product/{id}(id=${review.product.id})}"
                                class="fw-bold text-dark text-decoration-none d-block mb-1"
                                th:text="${review.product.name}">Tên sản phẩm</a>

                            <!-- Star display -->
                            <div class="mb-1">
                                <th:block th:each="i : ${#numbers.sequence(1, 5)}">
                                    <i th:class="${i <= review.rating} ? 'fas fa-star text-warning' : 'far fa-star text-muted'"
                                        style="font-size:.9rem;"></i>
                                </th:block>
                                <span class="ms-1 small text-muted fw-semibold" th:text="${review.rating == 1 ? 'Rất tệ' :
                                               (review.rating == 2 ? 'Tệ' :
                                               (review.rating == 3 ? 'Ổn' :
                                               (review.rating == 4 ? 'Tốt' : 'Xuất sắc')))}">Tốt</span>
                            </div>

                            <!-- Comment -->
                            <p class="text-secondary mb-1" style="font-size:.9rem;"
                                th:text="${review.comment != null && !review.comment.isEmpty()} ? ${review.comment} : '(Không có nhận xét)'">
                            </p>

                            <!-- Date -->
                            <small class="text-muted">
                                <i class="far fa-clock me-1"></i>
                                <span
                                    th:text="${#temporals.format(review.reviewDate, 'HH:mm dd/MM/yyyy')}">01/01/2025</span>
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </article>
</body>

</html>